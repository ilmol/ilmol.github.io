---
layout: post
comments: true
title: Doctype을 넘어 (IE8 논란의 원문)
date: 2008-01-29 13:05:45.000000000 -05:00
categories:
- BROWSER
- CSS
- HTML
- JS
- standards
- userfriendly
- article
---
<p>최근 마이크로소프트쪽에서 제안한 버전 지정 Version Targeting 때문에 <a href="http://ilmol.com/wp/2008/01/23/351/">표준 커뮤니티가 후끈 거리고 있습니다</a>.  하지만 IE 이기 때문에 라는 색안경이 큰 역할을 하고 있는듯 한데요.  이 움직임의 시발점이된 Aaron Gustafson 의 "<a href="http://alistapart.com/articles/beyonddoctype">Beyond DOCTYPE: Web Standards, Forward Compatibility, and IE8</a>" 이라는 글입니다.  <a href="http://alistapart.com">A List Apart</a>에 소개되었죠.  이제 어느정도 자리를 잡혀가는 한국의 표준 커뮤니티에도 제대로된 토론과 이해가 있었으면 하는 바램으로 번역해서 올립니다.</p>
<p>Translated with the <a href="http://alistapart.com/copyright/">permission of A List Apart Magazine</a> and the author[s].
이하의 글은 A List Apart Magazine과 저자의 허락아래 번역되었습니다.</p>
<h2>"Beyond DOCTYPE: Web Standards, Forward Compatibility, and IE8"</h2>
<p>성장은 언제나 진통이 따른다.  브라우저도 개발자들이 특정 브라우저나 툴에 맞추게 되면 유저들이 진통을 격게된다.  새로운 브라우저 버전들이 공개되고 몇개의 버그들이나 스팩의 약간의 변화에 사이트들은 깨지게 되고 상사나 유저들이 실망하게 되는 것이다.</p>
<p>몇시간을 들여 왜 사이트가 깨졌는지 설명할수 있겠지만 아예 처음부터 깨지지 않는다면 더 낫지 않겠는가?</p>
<h3>약간의 배경</h3>
<p>CSS의 상당한 업글을 보여주었던 IE7 의 공개에 힘입어 IE팀은 완전히 새로운 렌더링을 탑제한 IE8(CSS2.1 을 최대한 따른) 개발을 시작했다.  그리고 Acid2 렌더링 테스트를 완벽하게 통과하는 기염을 토해내었다.  이것은 IE가 곧 generated content 와 data URL 을 지원한다는 것 뿐만이 아니라 hasLayout 이 완전히 사라진다는 것을 의미한다.  Acid2 를 통과한 사파리나 iCab, Konqueror 그리고 오페라와 렌더링에 있어서 동격을 이룬다고 할수 있다. (Firefox3는 Acid2를 통과했지만 아직 출시되지 않았다.)</p>
<p>이번 새 엔진을 개발하는 동안 IE팀은 IE7 을 공개하면서 받은 여러 비판을 잊지 않았다.  몇몇 표준 구루들과 Microsoft의 몇몇 팬들까지도 IE7 이 버그나 CSS 지원에 있어서 충분하지 못했다고 생각했었고 상당수의 개발자들은 IE7 에서 깨지는 사이트들을 바라보며 불신에 속삭였다.  이에 Roger Johanssen은 자신의 블로그에 IE가 깨지는 3가지의 이유를 나열했지만 IE팀은 4번째 이유까지 발견했다.  CSS 레이아웃을 가능케 하는 중요 부분인 Doctype 이 호환성을 지키기 위해서 너무나 부족함을 말이다.
<!--more--></p>
<h3>DOCTYPE 스위치는 깨졌다</h3>
<p>1998년, Todd Fahrner 가 개발자를 위한 모드와 그외의 사람들을 위한 2개의 랜더링 모드를 가능케 하도록 제안한다.  컨셉은 간단했다.  유저 에이전트(ex 브라우저) 가 표준에 적합한 DOCTYPE 을 포함한다면 제작자가 표준작업을 제대로 알고 한 문서라는 것을 가정하고 "표준"데로(W3C 박스모델을 사용하여) 렌더링을 하는 것이었다.  반대로 DOCTYPE이 명시되지 않았을 경우, "quirks" 쿽스 모드로 인식하여IE5.x/Windows 의 비표준 박스모델로 렌더링 되는 것이다.</p>
<p>이 컨셉은 2년후 IE5/Mac 브라우저에 처음 적용되어 타 브라우저들에 빠르게 퍼져갔다.  표준을 조금이라도 인식하는 개발자들은 이미 'validation' 의 목적으로DOCTYPE 을 삽입하여 사용하고 있었으며 스펙에 따라 렌더링하는 데에는 그 이상을 따르지 않았다.  표준을 상관치 않는 개발자들에겐 DOCTYPE 을 상관치 혹은 몰랐기에 문서가 특별한 모드로 렌더링 되고 있었다.</p>
<p>불행하게도 다음의 두 중요한 사실이 DOCTYPE 이 표준 모드로의 스위치로써 지탱되지 못하도록 하였다.</p>
<ol>
<li>A List Apart 이나 Web Standards Project 등을 통하여 표준을 자각한 개발자들은 완전한 DOCTYPE을 슬슬 삽입하게 되었고</li>
<li>IE6가 6년간 렌더링에 변동이 없었으므로 많은 개발자들이 자신들이 맞다고 생각 하게 되었다.</li>
</ol>
<p>이 두 상황이 Doctype 스위치를 악화한 치명적인 이유는 개발자들이 Doctype을 맞게 쓰는 것이 표준을 올바로 이해하고 렌더링을 제대로 하는 것일 꺼라는 '가정'을 했기 때문이다.  왜 실패했는지 어떻게 아느냐고 묻는다면, 바로 IE7이 공개되었을때, 사이트들이 깨진것을 보면 알수 있다.</p>
<p>물론 Roger가 지적했듯이 IE6에 국한된 CSS 핵을 사용했기 때문이기도 하다.  하지만 대부분은 IE6 에서만 사이트 렌더링을 확인한 이유이거나 혹은 가장 많이 사용되는 대표적인 IE6에서만 잘 보여진다면 괜찮다고 생각했기 때문이다.   IE6의 불완전함은 문서로 잘 나타나져 있었으니 개발자들이 좀 알고 있었어야 한다고 할지 모르지만 많은 개발자들은 "표준 모드" 의 옵션이 주어지지 않았거나 아예 그 존재조차 모르고 있었다.</p>
<p>IE의 플랫폼아키택인 Christ Wilson 은 IE의 개발의 핵심은 웹을 깨트리지 않는 것이라고 자주 이야기 하곤 했다.  하지만 슬프게도 IE7 은 많은 이들에게 바로 그것을 행해버리고 말았다.  똑같은 실패를 거듭하지 않고자 Microsoft는 Web Stands Project (저자 또한 멤버이다) 와 여러 표준을 인식한 개발자들에게 앞으로 개발자들이 올바른 표준을 준수할수 있도록 도울수 있는 방법에 대해 도움을 요청했다.  목표는 DOCTYPE 스위치 보다 더 뚜렷하며 IE뿐만이 아닌 여러 브라우저들에서도 적용이 가능한 '방법' 을 찾는 것이었다.</p>
<h3>완벽을 바라는 미래</h3>
<p>작년 SXSW 에서 나는 운좋게도 뉴욕 공립 도서관의 Carrie Bickner 가 진행하는 토론회를 보게되었다. (Carrie Bickner, A List Apart의 Jefferey Zeldman의 부인)  "디지털 유산과 Individual Collector 의 보호" 라는 주제 아래 도서관들과 개개인들이 디지털 아카이브를 유지하며 격는 문제점을 토론하고 있었는데, 대부분의 문제들은 꾸준히 업그레이드 되고 있는 파일 포멧들과 어플리케이션들에서 비롯된 것들이었다.  Microsoft 오피스 2007을 예로 들면, Word1.0 버전의 문서를 그 당시 의도 했던 것처럼 렌더링, 보여주지 못한다는 것이다.  이 토론회는 나로 하여금 지금까지 웹이 얼마나 변해왔으며 앞으로 웹이 진화하며 얼마나 변화할 것인가에 대해 생각하게 하였다.</p>
<p>웹표준의 지지자의 한사람으로써 브라우저들의 꾸준한 발전과 함께 표준 이행을 꾸준히 개선하기를 원하지만 힘들게 만들어온 웹(테이블 레이아웃 조차도)을 보존하는 것 또한 중요하다고 생각한다.  아직까지는 Doctype 스위치가 괜찮게 돌아가니 그다지 "뒤로돌리는것" 이 어렵지 않겠지만 IE6 의 "표준" 에 맞춘 사이트는 어찌할 것인가?  많은 경우 IE7 이 제대로 렌더링 하지 못한다는걸 우리는 이미 잘 알고 있다.  그렇다면 저자가 원한데로 페이지를 보기위해서는 IE6 브라우저를 언제나 하나씩 가지고 있어야 한다는 말인가?  바로 그것이 수많은 도서관들이 옛 파일들을 보기 위해서, 보존하기 위해서 택한 방법이다.  IE8이 점점 다가 오고 있는 가운데 IE7의 렌더링 엔진에 맞춘 문서들이 갖게될 문제들은 앞의 도서관들과 별반 다를 것이 없다.  과연 무엇이 해답인 것인가?</p>
<h3>브라우저 버전에 맞추기</h3>
<p>이상적인 세상에선 모든 스펙들이 시작에서 부터 유저에이전트들의 해석, 이행까지 완벽할것이다.  그보다 약간 덜 이상적인 버전의 세상에선 브라우저 밴더들이 꾸준히 업데이트 되는 표준들을 즉시 유저에이전트(브라우저)에 적용하여 유저들이 손가락 까딱 하지 않고 최신 버전의 브라우저를 사용 가능토록 할 것이다.  우리 개발자들 또한 최신의, 최고의 기술들을 사용하여 이전 버전 호환성의 걱정 없이 사이트나 어플들을 개발 할 것이다.  하지만 모두가 알다시피 우리의 현실은 그정도 레벨의 완벽에도 가깝지 않다.</p>
<p>표준은 힘들게 개발되고 발전하여 가끔은 몇년씩 걸려 "권고안" 에 상태에 이른다.  브라우저 공개의 사이클은 상품개발이나 마케팅 (보안, 기능 속도등) 과 긴밀하게 연관되어 벤더들이 표준에 직접 참여함에도 불구하고 표준 스펙의 준수는 먼 이야기가 되기 십상이다.  그리고 유저들은 특히 공공기관이나 회사들은 브라우저 업그래이드가 절대 빠르지 않다. </p>
<p>이 모든 요인들은 우리 웹개발자들을 사이트를 제작함에 있어서 곤란하게 한다.  우리가 원하는데로 브라우저가 보여준다는 보장이 어디있단 말인가?</p>
<p>CSS2.1이나 JS1.5 등의 언어의 버전을 명시하는 방법도 있긴 하다.  하지만 불행하게도 브라우저 벤더들은 몇몇 부분들의 스펙들을 적용하며 브라우저들 간의 해석이 다르기도 하니 두개의 동급의 브라우저들 에서 같은 CSS 인데도 완전히 다른 렌더링을 보여주기도 하며 같은 컨트롤이지만 완전히 다른 이벤트를 연출하기도 한다.</p>
<p>이러한 상황 가운데 우리 개발자들에게 주어지는 게런티, 보장, 5년 후나 지금이나 똑같이 해석될수 있는 옵션은 한가지 밖에 없다.  개발 배경이 된 브라우저들 리스트를 명시하게 한 후 해당 브라우저들을 이전 버전들도 지원케 하여 개발자가 원래 계획했던 모습들이 현재 뿐 아니라 미래에도 렌더링 되도록 하는 것이다. </p>
<p>이것이 바로 우리 그룹이 IE8에 제안하기로 결정한 것이며 타 브라우저들에도 적용되기를 바라는 것이다.</p>
<h3>syntax 를 간편하게</h3>
<p>이 "버전 지정"을 개발자들이 브라우저에 적용함에 있어서 중요하다 생각했던 부분중의 하나는 하드코딩이나 프로그램에 사용함을 쉽게 적응 할수 있도록 하는 것이었다.  <a href="http://ilmol.com/wp/2005/07/05/79/">Conditional 코멘트</a>나 XML 프롤로그, 혹은 HTML 프로필 형식등의 여러 syntax 옵션들을 고려해 보았고 그중 META 메타 엘리먼트 만큼 역할을 잘 수행하는 것이 없었다.</p>
<p>간단한 meta 선언을 삽입하여 우리는 IE8 이 어떠한 렌더링 엔진을 사용하는지 지정할수가 있다.  예를들어 이것을 head 부분에 삽입하면</p>
<p>{% highlight html %}<meta http-equiv="X-UA-Compatible" content="IE=8" />{% endhighlight %}</p>
<p>IE8에서 새 "Standard Mode"를 사용하여 렌더링 하게 된다.  이 방법은 쉽게 다른 브라우저들도 포함할 수 있다.
{% highlight html %}<meta http-equiv="X-UA-Compatible" content="IE=8;FF=3;OtherUA=4" />{% endhighlight %}</p>
<p>이 지정법을 쉽게 설명하자면 이 meta 엘리먼트를 사용을 character 인코딩을 지정해 주는것과 같은 방식이다.  이 "버전지정"이 작동하기 위해서는 meta 엘리먼트가 head안에 최대한 상위에 위치해야 하고 타 메타 엘리먼트나 타이틀 엘리먼트가 상위에 위치할수 있으나 타 엘리먼트들 보다 아래에 위치하면 안된다.</p>
<p>요목조목 살펴 보신 분들은 HTTP-equiv 형을 사용한것을 아셨을 것이다.  이 뜻은 서버쪽 해더에도 다음의 삽입시에 같은 효과를 볼수 있다는 것이다.</p>
<p>X-UA-Compatible: IE=8;FF=3;OtherUA=4</p>
<p>또한 함께 사용할수도 있다.  예를들어 header 방법으로 기본락을 전체 사이트에 적용시킨 후에 각각의 필요한 페이지에 meta 엘리먼트를 사용하여 적용 시키는 것이다.</p>
<h3>Progressive enhancement은 어디로?</h3>
<p>특정 브라우저 버전에 지정하는 "버전지정"은 미래까지도 확실한 사이트 렌더링의 보장이 있지만 그렇다면 progressive enhancement(<a href="#progressiveEnhancement">1</a>)의 콘셉을 깨뜨리는 것일까?  앞으로 우리가 사이트를 만드는 방식을 바꿔야 하는 것일까?  최신 CSS 속성들이 유효할때 즉시 사용할수 있는 것인가 말이다.  이 질문들은 우리가 처음 "버전명시" 를 논의할때 갖고 있었던 많은 질문들 이었다.</p>
<p>예를들어 IE8이 generated content(<a href="#generatedContent">2</a>) 을 지원하지 않는다고 한다고 가정한 후 (Acid2를 통과한만큼 지원하지만 그저 예를 든것임) IE8을 지정하여 generated content 를 사용한다면 IE외의 타 최신 브라우저들에서는 generated content가 보여질것이고 IE9가 generated content를 지원하더래도 사이트는 IE8에 지정되어 있기에 볼수 없을 것이다.  이 사이트에 "지정" 되어 있는 정보를 IE9로 업데이트 해야 비로소 generated content를 볼수 있는 것인데, 이것은 progressive enhancement의 코어 컨셉을 역행 하는 것이다.</p>
<p>이 progressive enhancement 부분을 포기해야 한다는 것이 상당한 고통인만큼 이 지침은 어찌보면 public-facing 임을 감안할때 최선일지도 모른다.  앞으로 브라우저들이 어떻게 작동할 것인지에 대한 "가정"을 내리면 안되기 때문이다.  IE9로의 변화가 조금이라도 사이트의 레이아웃을 깨뜨리거나 스크립트의 지침의 해석을 바꾸게 된다면 유저들에게도 재난일 뿐 아니라 새 브라우저가 나오기전에 잘 보이던 상태로 돌리기 위하여 개발팀 또한 고생해야 할것이다.(이것이 현재 웹의 상태이기도 하다)  "버전지정"은 개발팀이 원할때, 새 브라우저에 맞추어야 겠다고 결정을 내렸을때, 특히 새 브라우저 버전에 맞출 시간을 우리 팀이 정하여 원하는 만큼의 시간을 맞추고(새 브라우저 출시 시간에 맞추지 않고) 작업에 착수할수 있다.</p>
<p>그렇다면 "버전지정"은 progressive enhancement의 끝을 말하는 걸까?  현재로써는  no, 아니다.  일단 "버전지정"이 포함되지 않은 버전들의 브라우저들을 앞으로 몇년간 써야 하고 progressive enhancement은 여러 레벨의 CSS와 JS 를 지원하는데 필요한 방법이기 때문이다.  더 나아가 conditional 코멘트를 사용하여 스타일을 구현하고 스크립트를 덧붙여 IE 브라우저들을 사용하는 것을 몇년간 더 해야하기 때문이며 마지막으로 Progressive enhancement 테크닉을 사용한 JS 는 새 브라우저를 준비하는데에 재코딩의 시간을 줄여주기 때문이다.</p>
<h3>보너스: "edge"</h3>
<p>위험을 감수하며 무모함을 즐기는 이들을 위하여 IE는 "edge" 라는 값을 제공하기로 했다.
{% highlight html %}<meta http-equiv="X-UA-Compatible" content="IE=edge" />{% endhighlight %}</p>
<p>이 옵션은 권장하지 않으며 사이트를 가장 최신의 IE브라우저로 렌더링을 지정하는 방법이다.  IE=1000 이라는 편법을 써서 최신 IE 브라우저를 지정 하는 것 보다는 깨끗한 방법이지 않은가?  하지만 실험용 사이트에 적용 하는것 말고는 edge값을 적용 하는 것은 그리 실용적이지 않을 것이다.  이유는 Eric Meyer 라고 해도(렌더링의 지존) 새 브라우저가 가지고 올 레이아웃이나 스크립트 버그들을 예상할수 없기 때문이다.</p>
<h3>미래의 희망</h3>
<p>오랫동안 우리 디자이너들과 개발자들은 사이트를 제대로 출력이 가능한 신뢰할수 있는 방법을 고대하고 있었다.  크로스 플랫폼이 가능한 스타일과 스크립트를 짜야하는 두통에다 새 브라우저의 출시와 함께 손도 대 보지 못한곳이 깨지는 아픔을 견뎌야 하고 우리의 클라이언트들과 보스, 그리고 유저들에게 예상치 못한 곳이 깨지는 원인을 설명하는것이 절대 즐겁지도 않다.  하지만 IE8 의 버전지정의 소개와 함께 터널끝에 희망의 빛이 보인다.  나는 다함께 타 브라우저 벤더들도 마이크로소프트와 뜻을 같이 하여 이 기능을 적용했으면 하는 바램이다.</p>
<ol>
<li id="progressiveEnhancement">Progressive Enhancement - 기본 컨텐츠와 기본 기능들이 모든 브라우저들과 모든 이들에게 접근이 가능케 하며 접근성, 시멘틱 마크업 그리고 외부 css 와 스크립트를 강조하는 컨셉이다.</li>
<li id="generatedContent">Generated Content - 생성된 컨텐츠.  예를들어 :before나 :after 를 사용하여 컨텐츠를 브라우저가 직접 생산하는 것을 일컫는다.</li>
</ol>
